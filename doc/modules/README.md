# Modules

- [Modules](#modules)
  - [Declaration](#declaration)
    - [Pre-initialization code](#pre-initialization-code)
    - [Explicit Initializers](#explicit-initializers)
    - [Post-initialization code](#post-initialization-code)
  - [Module Elements](#module-elements)
  - [Examples](#examples)

Modules in µcad are similar to so-called *classes* in other programming languages
but also they differ quite a bit.

A module consist of an *identifier*, some *initializers*, *fields*  and *code* which can be run by calling the module like a function.
If code in a module gets complex it can be separated into functions.

The *parameters* of a module can be defined directly behind the module name (*implicitly*) as well as by several *init()* functions (*explicitly*) which are quite similar to *constructors* in other programming languages.

## Declaration

A *module declaration* consists of...

- a header where one defines a name of the module and the parameters of the *implicit initializer*,
- maybe some so-called *pre-initialization code*,
- maybe some *explicit initializers*, and
- some *post-initialization code* which sometimes is called just *code*.

[![test](.test/modules_declaration.png)](.test/modules_declaration.log)

```µcad,modules_declaration
// define custom module circle with an implicit initializer
module small_disc(diameter: Length) {
    // explicit initializers 
    init(radius: Length) {
        diameter = radius * 2.0;
    }

    // post-initialization code
    std::geo2d::circle(diameter);
}

// call module
std::debug::assert(small_disc(diameter = 1cm).diameter == 1cm);
std::debug::assert(small_disc(radius = 1cm).diameter == 2cm);
```

### Pre-initialization code

Pre-initialization code can just produce new *fields* and can not access the fields generated by the *implicit initializer* .

### Explicit Initializers

All `init` methods define the [explicit initializers](init.md).
It's not allowed to write code between them.

### Post-initialization code

Post-initialization code is either the code of a module without any *explicit initializers* or the code after them.
It can access all fields generated from implicit or explicit initialization or from any explicit initializer.

## Module Elements

- [Functions](functions.md)
- [Explicit Initialization (`init`)](init.md)
- [Implicit Initialization](parameter_list.md)
- [Fields](fields.md)

## Examples

- [Examples](EXAMPLES.md)
