-- Test --
  part_declaration
  ../doc/structure/workbench.md:43

-- Code --

// sketch with a `radius` as building plan
sketch wheel(radius: Length) {

    // init code
    const FACTOR = 2;

    // initializer
    init(diameter: Length) {
        // set `radius`
        radius = diameter / FACTOR;
    }

    // function (sub routine)
    fn into_diameter(radius: Length) {
        return radius * FACTOR;
    }

    // building code begins

    // set a property which can be seen from outside
    prop diameter = into_diameter(radius);
    // local variable
    i = 1;
    
    // create circle
    std::geo2d::circle(radius);
}

use std::debug::assert;

// call sketch with diameter
d = wheel(diameter = 2cm);
// check radius
assert_eq([d.radius, 1cm]);

// call sketch with radius
r = wheel(radius = 1cm);
// check diameter
assert([r.diameter, 2cm]);

-- Output --
-- Errors --
error: Symbol FACTOR not found.
  ---> <from_str>:8:5
     |
   8 |     init(diameter: Length) {
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
error: Symbol into_diameter not found.
  ---> <from_str>:21:21
     |
  21 |     prop diameter = into_diameter(radius);
     |                     ^^^^^^^^^^^^^^^^^^^^^
     |
error: Workbench circle cannot find initialization for those arguments
warning: This expression statement did not produce any model
  ---> <from_str>:26:5
     |
  26 |     std::geo2d::circle(radius);
     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
warning: The sketch workbench will produce no 2D output.
  ---> <from_str>:2:1
     |
   2 | sketch wheel(radius: Length) {
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
error: Symbol assert_eq not found.
  ---> <from_str>:34:1
     |
  34 | assert_eq([d.radius, 1cm]);
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^
     |
error: Symbol into_diameter not found.
  ---> <from_str>:21:21
     |
  21 |     prop diameter = into_diameter(radius);
     |                     ^^^^^^^^^^^^^^^^^^^^^
     |
error: Property not found: diameter
  ---> <from_str>:39:9
     |
  39 | assert([r.diameter, 2cm]);
     |         ^^^^^^^^^^
     |
error: Elements of list have different types: [[101m[1m INVALID TYPE [49m[22m, Length]
  ---> <from_str>:39:8
     |
  39 | assert([r.diameter, 2cm]);
     |        ^^^^^^^^^^^^^^^^^
     |
error: Missing arguments: v
  ---> <from_str>:39:8
     |
  39 | assert([r.diameter, 2cm]);
     |        ^^^^^^^^^^^^^^^^^
     |
-- Test Result --
TODO
